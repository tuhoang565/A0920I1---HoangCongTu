<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<form id="customerForm">
    <table border="1">
        <tr>
            <td>Họ và tên</td>
            <td><input type="text" id="name"></td>
        </tr>
        <tr>
            <td>Số CMND</td>
            <td><input type="text" id="id"></td>
        </tr>
        <tr>
            <td>Ngày/tháng/năm sinh</td>
            <td><input type="date" id="birthday"></td>
        </tr>
        <tr>
            <td>Địa chỉ</td>
            <td><select id="address">
                <option>Huế</option>
                <option>Đà Nẵng</option>
                <option>Quảng Nam</option>
            </select></td>
        </tr>
        <tr>
            <td>Email</td>
            <td><input type="email" id="email"></td>
        </tr>
        <tr>
            <td>Loại khách hàng</td>
            <td><select id="customer">
                <option>Diamond</option>
                <option>Platinum</option>
                <option>Gold</option>
                <option>Silver</option>
                <option>Member</option>
            </select>
            </td>
        </tr>
        <tr>
            <td>Giảm giá</td>
            <td><select id="discount">
                <option>10%</option>
                <option>15%</option>
                <option>20%</option>
            </select>
            </td>
        </tr>
        <tr>
            <td>Số lượng</td>
            <td><input type="number" id="quantity"></td>
        </tr>
        <tr>
            <td>Số ngày thuê</td>
            <td><input type="number" id="rentDays"></td>
        </tr>
        <tr>
            <td>Loại dịch vụ</td>
            <td><select id="service">
                <option value=500>Villa (500$/ngày)</option>
                <option value=300>House (300$/ngày)</option>
                <option value=100>Room (100$/ngày)</option>
            </select>
            </td>
        </tr>
        <tr>
            <td>Loại phòng</td>
            <td><select id="room">
                <option>Vip</option>
                <option>Business</option>
                <option>Normal</option>
            </select>
            </td>
        </tr>
    </table>
</form>
<br/>
<input type="button" value="Add" onclick="addCustomer()">
<input type="button" value="Show Info" onclick="showInformation()">


<p id="result"></p>


<script>
    let nameCustomer = document.getElementById("name");
    let idCustomer = document.getElementById("id");
    let birthday = document.getElementById("birthday");
    let address = document.getElementById("address");
    let email = document.getElementById("email");
    let customer = document.getElementById("customer");
    let discount = document.getElementById("discount");
    let quantity = document.getElementById("quantity");
    let rentDays = document.getElementById("rentDays");
    let service = document.getElementById("service");
    let room = document.getElementById("room");

    let arr = [
        ["tu", "123", "29-1-2000", "Huế", "tuhoang@gmail.com", "diamond", 0.1, 3, 5, 500, "vip"],
        ["hoang", "124", "2-1-2000", "Đà Nẵng", "hoang@gmail.com", "gold", 0.2, 3, 8, 300, "normal"]
    ];

    function addCustomer() {
        //tao 1 mang mot chieu, sau do them mang nay vao mang 2 chieu
        let newArr = [];
        newArr.push(nameCustomer.value, idCustomer.value, birthday.value, address.value, email.value, customer.value,
            discount.value, quantity.value, rentDays.value, service.value, room.value);

        arr.push(newArr);
        showInformation();
    }

    function showInformation() {
        let result = ("<table width='100%' border='1'>");
        result += "<tr>"
            + "<td>Họ và tên</td>"
            + "<td>Số CMND</td>"
            + "<td>Ngày/tháng/năm sinh</td>"
            + "<td>Địa chỉ</td>"
            + "<td>Email</td>"
            + "<td>Loại khách hàng</td>"
            + "<td>Giảm giá</td>"
            + "<td>Số lượng</td>"
            + "<td>Số ngày thuê</td>"
            + "<td>Loại dịch vụ</td>"
            + "<td>Loại phòng</td>"
            + "</tr>";
        for (let i = 0; i < arr.length; i++) {
            result += "<tr>";
            for (let j = 0; j < arr[i].length; j++) {
                result += "<td>" + arr[i][j] + "</td>";

            }
            result += ("<td><button onclick='editInformation(" + i + ")'>Edit</button> "
                + "<button onclick='showTotalAmount(" + i + ")'>Total</button></td>");
            result += "</tr>";
        }
        result += ("</table>");
        document.getElementById("result").innerHTML = result;
    }

    function editInformation(x) {
        let chooseInformationEdit = parseInt(prompt("1.Họ và tên - 2.Số CMND - 3.Ngày tháng năm sinh - 4.Địa chỉ " +
            "- 5.Email - 6.Loại khách hàng - 7.Giảm giá - 8.Số lượng người - 9.Số ngày thuê - 10.Loại dịch vụ " +
            "- 11.Loại phòng"));

        switch (chooseInformationEdit) {
            case 1:
                arr[x][0] = prompt("Enter new name: ");
                break;
            case 2:
                arr[x][1] = prompt("Enter new id: ");
                break;
            case 3:
                arr[x][2] = prompt("Enter new birthday: ");
                break;
            case 4:
                arr[x][3] = prompt("Enter new address: ");
                break;
            case 5:
                arr[x][4] = prompt("Enter new email: ");
                break;
            case 6:
                arr[x][5] = prompt("Enter new customer: ");
                break;
            case 7:
                arr[x][6] = parseFloat(prompt("Enter new discount: "));
                break;
            case 8:
                arr[x][7] = parseInt(prompt("Enter new quantity of people: "));
                break;
            case 9:
                arr[x][8] = parseInt(prompt("Enter new rent days: "));
                break;
            case 10:
                arr[x][9] = prompt("Enter new service: ");
                break;
            case 11:
                arr[x][10] = prompt("Enter new room: ");
                break;
            default:
                alert("error");


        }
        showInformation();
    }

    function showTotalAmount(x) {
        let discountAddress;
        let discountrentDays;
        let discountCustomer;

        if (arr[x][3] === "Đà Nẵng") {
            discountAddress = 20;
        } else if (arr[x][3] === "Huế") {
            discountAddress = 10;
        } else {
            discountAddress = 5;
        }

        if(arr[x][8] > 7){
            discountrentDays = 30;
        }else if(arr[x][8] >= 5 && arr[x][8] <= 7){
            discountrentDays = 20;
        }else {
            discountrentDays = 10;
        }

        if(arr[x][5] === "Diamond"){
            discountCustomer = 15;
        }else if(arr[x][5] === "Platinum"){
            discountCustomer = 10;
        }else if(arr[x][5] === "Gold"){
            discountCustomer = 5;
        }else if(arr[x][5] === "Silver"){
            discountCustomer = 2;
        }else {
            discountCustomer = 0;
        }

        let discountMoney = parseInt(discountAddress) + parseInt(discountrentDays) + parseInt(discountCustomer);
        let moneyMustPaid = arr[x][9] * arr[x][8] - discountMoney;
        alert("The amount to be paid after discount: " + moneyMustPaid + "$");
    }

</script>
</body>
</html>